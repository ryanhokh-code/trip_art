<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>28/4-2/5 æ²–ç¹©å®¶æ—æ—…è¡Œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sea-blue: #b3e5fc;
            --wood-dark: #5d4037;
            --wood-medium: #8d6e63;
            --accent-orange: #ff7043;
            --white-glass: rgba(255, 255, 255, 0.9);
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #e1f5fe;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh;
        }

        /* --- Navigation Tabs --- */
        .nav-tabs {
            display: flex;
            width: 100%;
            background: var(--wood-dark);
            position: sticky; top: 0; z-index: 100;
        }
        .tab-btn {
            flex: 1; padding: 15px 5px; border: none;
            background: none; color: white; font-size: 12px;
            font-weight: 700; cursor: pointer; transition: 0.3s;
            border-bottom: 4px solid transparent;
        }
        .tab-btn.active {
            background: var(--wood-medium);
            border-bottom: 4px solid var(--accent-orange);
        }

        /* --- Main Container --- */
        .poster-container {
            width: 794px; height: 1123px;
            background: white;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            display: flex; flex-direction: column;
            position: relative; border-radius: 12px; overflow: hidden;
            border: 8px solid white;
            min-width: 794px;
            min-height: 1123px;
        }

        .content-section { display: none; width: 100%; height: 100%; }
        .content-section.active { display: block; }

        /* --- Tab 1: Map View --- */
        .main-header {
            position: absolute; top: 20px; left: 15px; z-index: 20; width: 85%;
        }
        .main-header h1 {
            background: var(--white-glass);
            display: inline-block; padding: 12px 35px; border-radius: 50px;
            color: var(--wood-dark); font-size: 28px;
            border: 3px solid var(--accent-orange);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 0;
        }
        .main-header span { font-size: 18px; color: #ff5722; margin-left: 10px; }

        .map-section {
            height: 82%; background-color: var(--sea-blue);
            background-image: url('https://iili.io/fULDeb1.png');
            background-size: cover; background-position: center; position: relative;
        }
        .schedule-section {
            height: 18%; background: var(--wood-medium);
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px;
            padding: 10px; box-sizing: border-box; border-top: 4px solid var(--wood-dark);
        }
        .pin { position: absolute; width: 22px; height: 22px; background: var(--accent-orange); border: 2px solid white; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); z-index: 10; }
        .pin::after { content: attr(data-label); position: absolute; transform: rotate(45deg); left: 24px; top: 0; background: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; white-space: nowrap; font-weight: 700; color: var(--wood-dark); }
        .wood-box { background: rgba(255, 255, 255, 0.9); border-radius: 6px; padding: 4px; text-align: center; display: flex; flex-direction: column; justify-content: center; }
        .wood-box h3 { margin: 0; font-size: 16px; color: var(--wood-dark); }
        .wood-box p { margin: 0; font-size: 13px; line-height: 1.2; font-weight: 700; }

        /* --- Info Layouts --- */
        .info-page { padding: 25px; background: #fffaf0; min-height: 100%; box-sizing: border-box; }
        .info-page h2 { color: var(--accent-orange); border-bottom: 2px solid var(--accent-orange); padding-bottom: 5px; }
        .info-card {
            background: white; border-radius: 12px; padding: 15px;
            margin-bottom: 15px; border-left: 5px solid var(--wood-medium);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .info-card h4 { margin: 0 0 5px 0; color: var(--wood-dark); }
        .info-card p { margin: 0; font-size: 14px; color: #555; line-height: 1.6; }

        /* Countdown */
        .countdown-container { background: linear-gradient(135deg, #ff7043, #ff5722); color: white; padding: 20px; border-radius: 15px; text-align: center; margin-bottom: 20px; font-size: 16px; font-weight: 700; }
        #timer { font-size: 24px; margin-top: 10px; letter-spacing: 2px; }

        /* Converter */
        .converter-box { background: white; padding: 20px; border-radius: 15px; border: 3px solid var(--accent-orange); }
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-weight: 700; color: var(--wood-dark); margin-bottom: 5px; }
        .input-group input { width: 100%; padding: 12px; font-size: 16px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .result-display { display: flex; justify-content: space-between; padding: 12px; background: #f5f5f5; border-radius: 8px; margin-bottom: 10px; font-weight: 700; }

        /* Weather */
        .weather-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 15px; }
        .weather-day { background: white; padding: 15px 10px; border-radius: 12px; text-align: center; border: 2px solid #e0e0e0; }
        .weather-day h4 { margin: 0 0 10px 0; color: var(--wood-dark); font-size: 14px; }
        .weather-icon { font-size: 36px; margin: 10px 0; }
        .weather-temp { font-size: 18px; font-weight: 700; color: var(--accent-orange); }
        .weather-desc { font-size: 11px; color: #666; margin-top: 5px; }

        /* Expense Tracker */
        .expense-summary { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .expense-box { background: linear-gradient(135deg, #ff7043, #ff5722); color: white; padding: 15px; border-radius: 12px; text-align: center; }
        .expense-box h4 { margin: 0; font-size: 12px; opacity: 0.9; }
        .expense-box .amount { font-size: 24px; font-weight: 700; margin-top: 5px; }
        .expense-input { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 8px; margin-bottom: 10px; }
        .expense-input input, .expense-input button { padding: 10px; border-radius: 8px; border: 2px solid #ddd; font-size: 14px; }
        .expense-input button { background: var(--accent-orange); color: white; border: none; cursor: pointer; font-weight: 700; }
        .expense-list { max-height: 400px; overflow-y: auto; }
        .expense-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px; border-left: 4px solid var(--wood-medium); }
        .expense-item button { background: #f44336; color: white; border: none; padding: 5px 12px; border-radius: 5px; cursor: pointer; font-size: 12px; }

        /* Photo Checklist */
        .photo-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .photo-card { background: white; padding: 15px; border-radius: 12px; border: 2px solid #e0e0e0; cursor: pointer; transition: 0.3s; }
        .photo-card:hover { border-color: var(--accent-orange); transform: translateY(-2px); }
        .photo-card.checked { background: #e8f5e9; border-color: #4caf50; }
        .photo-card h4 { margin: 0 0 8px 0; color: var(--wood-dark); font-size: 15px; display: flex; align-items: center; gap: 8px; }
        .photo-card p { margin: 0; font-size: 12px; color: #666; line-height: 1.4; }
        .checkmark { font-size: 20px; color: #4caf50; display: none; }
        .photo-card.checked .checkmark { display: inline; }

        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 200; justify-content: center; align-items: center; }
        .modal-content { background: #fffaf0; width: 80%; max-width: 300px; padding: 25px; border-radius: 20px; border: 4px solid var(--accent-orange); text-align: center; position: relative; }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 24px; cursor: pointer; color: #999; }
    </style>
</head>
<body>

    <div class="nav-tabs">
        <button class="tab-btn active" onclick="openTab(event, 'map-view')">è¡Œç¨‹åœ°åœ–</button>
        <button class="tab-btn" onclick="openTab(event, 'flight-view')">èˆªç­è³‡è¨Š</button>
        <button class="tab-btn" onclick="openTab(event, 'food-view')">æ²–ç¹©ç¾é£Ÿ</button>
        <button class="tab-btn" onclick="openTab(event, 'pack-view')">å‚™å¿˜æ¸…å–®</button>
        <button class="tab-btn" onclick="openTab(event, 'calc-view')">åŒ¯ç‡æ›ç®—</button>
        <button class="tab-btn" onclick="openTab(event, 'weather-view')">å¤©æ°£é å ±</button>
        <button class="tab-btn" onclick="openTab(event, 'expense-view')">é–‹æ”¯è¨˜éŒ„</button>
        <button class="tab-btn" onclick="openTab(event, 'photo-view')">ç›¸ç‰‡æ‰“å¡</button>
    </div>

    <div class="poster-container">

        <div id="map-view" class="content-section active">
            <div class="main-header">
                <h1>28/4-2/5 å®¶æ—æ—…è¡Œ <span>aka æ„·è•First Trip</span></h1>
            </div>
            <div class="map-section">
                <div class="pin" style="top: 70%; left: 25%;" data-id="kokusai" data-label="åœ‹éš›é€š"></div>
                <div class="pin" style="top: 20%; left: 45%;" data-id="churaumi" data-label="æ°´æ—é¤¨"></div>
                <div class="pin" style="top: 32%; left: 50%;" data-id="manzamo" data-label="è±¡é¼»å²©"></div>
                <div class="pin" style="top: 50%; left: 24%;" data-id="american" data-label="ç¾åœ‹æ‘"></div>
                <div class="pin" style="top: 50%; left: 35%;" data-id="zoo" data-label="å…’ç«¥ç‹åœ‹"></div>
                <div class="pin" style="top: 42%; left: 42%;" data-id="aeon" data-label="Aeon"></div>
                <div class="pin" style="top: 82%; left: 12%;" data-id="dmm" data-label="DMM"></div>
                <div class="pin" style="top: 85%; left: 15%;" data-id="outlet" data-label="Outlet"></div>
                <div class="pin" style="top: 70%; left: 30%;" data-id="teamlab" data-label="teamLab"></div>
                <div class="pin" style="top: 75%; left: 10%;" data-id="airport" data-label="æ©Ÿå ´"></div>
            </div>
            <div class="schedule-section">
                <div class="wood-box"><h3>Day 1</h3><p>æŠµé”<br>åœ‹éš›é€š</p></div>
                <div class="wood-box"><h3>Day 2</h3><p>è±¡é¼»å²©<br>æ°´æ—é¤¨<br>ç¾åœ‹æ‘</p></div>
                <div class="wood-box"><h3>Day 3</h3><p>å…’ç«¥ç‹åœ‹<br>Aeon Mall</p></div>
                <div class="wood-box"><h3>Day 4</h3><p>DMMæ°´æ—é¤¨<br>Outletè³¼ç‰©</p></div>
                <div class="wood-box"><h3>Day 5</h3><p>teamlab<br>é‚£éœ¸æ©Ÿå ´</p></div>
            </div>
        </div>

        <div id="flight-view" class="content-section">
            <div class="info-page">
                <h2>âœˆï¸ èˆªç­è³‡è¨Š</h2>
                <div class="info-card">
                    <h4>å»ç¨‹ (4/28)</h4>
                    <p>èˆªç­ç·¨è™Ÿ: JX870 (æ˜Ÿå®‡èˆªç©º)<br>èµ·é£›: 09:30 (TPE)<br>æŠµé”: 11:50 (OKA)</p>
                </div>
                <div class="info-card">
                    <h4>å›ç¨‹ (5/02)</h4>
                    <p>èˆªç­ç·¨è™Ÿ: JX871 (æ˜Ÿå®‡èˆªç©º)<br>èµ·é£›: 13:00 (OKA)<br>æŠµé”: 13:30 (TPE)</p>
                </div>
                <div class="info-card">
                    <h4>æ©Ÿå ´æ³¨æ„äº‹é …</h4>
                    <p>â€¢ å»ºè­°ææ—©2.5å°æ™‚æŠµé”æ©Ÿå ´<br>â€¢ å‚™å¦¥å…¨å®¶è­·ç…§åŠæ„·è•å‡ºç”Ÿè­‰æ˜å‚™æŸ¥<br>â€¢ ç¢ºèªå¬°å…’æ¨è»Šæ‰˜é‹è¦å®š</p>
                </div>
            </div>
        </div>

        <div id="food-view" class="content-section">
            <div class="info-page">
                <h2>ğŸœ æ²–ç¹©å¿…åƒæ¨è–¦</h2>
                <div class="info-card">
                    <h4>æš–æš®æ‹‰éºµ (é‚£éœ¸/åè­·)</h4>
                    <p>æ›¾ç²å¾—ä¹å·ç¥¨é¸ç¬¬ä¸€åã€‚æ¨è–¦èŠéº»è”¥æ‹‰éºµ,æ¿ƒéƒæ¹¯é ­æ·±å—å®¶æ—å–œæ„›ã€‚</p>
                </div>
                <div class="info-card">
                    <h4>å¹¸ç¦é¬†é¤… (ç€¨é•·å³¶)</h4>
                    <p>é¬†è»Ÿç¶¿å¯†çš„å£æ„Ÿ,çœ‹è‘—ç„¡æ•µæµ·æ™¯äº«å—ä¸‹åˆèŒ¶,æ„·è•ä¹Ÿèƒ½åè‘—çœ‹æµ·ã€‚</p>
                </div>
                <div class="info-card">
                    <h4>ç‰çƒæ–°éºµ é€šå ‚</h4>
                    <p>ç‰¹è‰²çš„ã€Œç”·äººéºµã€(æ¿ƒåšè±šéª¨) èˆ‡ã€Œå¥³äººéºµã€(æ¸…çˆ½é›æ¹¯),å…¨å®¶å¤§å°éƒ½é©åˆã€‚</p>
                </div>
                <div class="info-card">
                    <h4>Blue Seal å†°æ·‡æ·‹</h4>
                    <p>æ²–ç¹©ä»£è¡¨æ€§å“ç‰Œã€‚æ¨è–¦ç´…èŠ‹å£å‘³èˆ‡æµ·é¹½å£å‘³,åˆ°è™•éƒ½æœ‰åˆ†åº—!</p>
                </div>
            </div>
        </div>

        <div id="pack-view" class="content-section">
            <div class="info-page">
                <div class="countdown-container">
                    <div>ğŸ® è·é›¢æ²–ç¹©é™è½é‚„æœ‰</div>
                    <div id="timer">è¨ˆç®—ä¸­...</div>
                </div>
                <h2>ğŸ§³ æ„·è•å‡ºé–€æ¸…å–®</h2>
                <div class="info-card">
                    <h4>å¿…éœ€å“</h4>
                    <p>â€¢ å°¿å¸ƒ/æ¿•ç´™å·¾<br>â€¢ å¥¶ç²‰/å¥¶ç“¶/ä¿æº«ç“¶<br>â€¢ æ›æ´—è¡£ç‰© (3å¥—/å¤©)</p>
                </div>
            </div>
        </div>

        <div id="calc-view" class="content-section">
            <div class="info-page">
                <h2>ğŸ’´ æ—¥å¹£åŒ¯ç‡æ›ç®—</h2>
                <div class="converter-box">
                    <div class="input-group">
                        <label>è¼¸å…¥æ—¥åœ“ (JPY)</label>
                        <input type="number" id="jpyInput" placeholder="0" oninput="convertCurrency()">
                    </div>
                    <div class="result-display"><span>æ¸¯å¹£ (HKD)</span><span id="hkdResult">â‰ˆ 0.00</span></div>
                    <div class="result-display"><span>å°å¹£ (TWD)</span><span id="twdResult">â‰ˆ 0.00</span></div>
                    <p style="font-size: 11px; color: #999; margin-top: 15px;">* åŒ¯ç‡é è¨­: 1 JPY = 0.052 HKD / 0.22 TWD</p>
                </div>
            </div>
        </div>
        <div id="weather-view" class="content-section">
            <div class="info-page">
                <h2>ğŸŒ¤ï¸ æ²–ç¹©å³æ™‚å¤©æ°£é å ±</h2>
                <div class="info-card">
                    <h4>ç›®å‰æ²–ç¹© (é‚£éœ¸) é å ±</h4>
                    <p id="weather-status">æ­£åœ¨å–å¾—æœ€æ–°å¤©æ°£è³‡æ–™...</p>
                </div>
                <div class="weather-grid" id="dynamic-weather-grid">
                    <div class="weather-day">è®€å–ä¸­...</div>
                </div>
            </div>
        </div>

        <div id="expense-view" class="content-section">
            <div class="info-page">
                <h2>ğŸ’° æ—…è¡Œé–‹æ”¯è¨˜éŒ„</h2>
                <div class="expense-summary">
                    <div class="expense-box">
                        <h4>ç¸½èŠ±è²»</h4>
                        <div class="amount" id="totalExpense">Â¥0</div>
                    </div>
                    <div class="expense-box">
                        <h4>ç­†æ•¸</h4>
                        <div class="amount" id="expenseCount">0</div>
                    </div>
                    <div class="expense-box">
                        <h4>å¹³å‡/æ—¥</h4>
                        <div class="amount" id="avgExpense">Â¥0</div>
                    </div>
                </div>
                <div class="converter-box">
                    <div class="expense-input">
                        <input type="text" id="expenseDesc" placeholder="é …ç›® (ä¾‹: æš–æš®æ‹‰éºµ)">
                        <input type="number" id="expenseAmount" placeholder="é‡‘é¡">
                        <button onclick="addExpense()">æ–°å¢</button>
                    </div>
                    <div class="expense-list" id="expenseList"></div>
                </div>
            </div>
        </div>

        <div id="photo-view" class="content-section">
            <div class="info-page">
                <h2>ğŸ“¸ å¿…æ‹ç…§ç‰‡æ¸…å–®</h2>
                <div class="photo-grid">
                    <div class="photo-card" onclick="togglePhoto(this)">
                        <h4><span class="checkmark">âœ“</span> æ„·è•åœ¨åœ‹éš›é€š</h4>
                        <p>ç¬¬ä¸€ç«™ç´€å¿µç…§,æ­é…åœ‹éš›é€šæ‹›ç‰Œ</p>
                    </div>
                    <div class="photo-card" onclick="togglePhoto(this)">
                        <h4><span class="checkmark">âœ“</span> æ°´æ—é¤¨é¯¨é¯Š</h4>
                        <p>é»‘æ½®ä¹‹æµ·å‰å…¨å®¶åˆç…§</p>
                    </div>
                    <div class="photo-card" onclick="togglePhoto(this)">
                        <h4><span class="checkmark">âœ“</span> è±¡é¼»å²©èƒŒæ™¯</h4>
                        <p>è¬åº§æ¯›ç¶“å…¸è§’åº¦</p>
                    </div>
                    <div class="photo-card" onclick="togglePhoto(this)">
                        <h4><span class="checkmark">âœ“</span> ç¾åœ‹æ‘æ‘©å¤©è¼ª</h4>
                        <p>å¤•é™½+æ‘©å¤©è¼ª+å®¶æ—</p>
                    </div>
                    <div class="photo-card" onclick="togglePhoto(this)">
                        <h4><span class="checkmark">âœ“</span> æ„·è•çœ‹å‹•ç‰©</h4>
                        <p>å…’ç«¥ç‹åœ‹äº’å‹•æ™‚åˆ»</p>
                    </div>
                    <div class="photo-card" onclick="togglePhoto(this)">
                        <h4><span class="checkmark">âœ“</span> teamLab å…‰å½±</h4>
                        <p>äº’å‹•è—è¡“æ²‰æµ¸ç…§</p>
                    </div>
                    <div class="photo-card" onclick="togglePhoto(this)">
                        <h4><span class="checkmark">âœ“</span> æ©Ÿå ´èµ·é£›ç…§</h4>
                        <p>æ˜Ÿå®‡èˆªç©ºçª—å¤–æ™¯è‰²</p>
                    </div>
                    <div class="photo-card" onclick="togglePhoto(this)">
                        <h4><span class="checkmark">âœ“</span> æ„·è•åœ¨é£›æ©Ÿä¸Š</h4>
                        <p>First tripç´€å¿µç…§</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="modal" id="infoModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">æ™¯é»åç¨±</h2>
            <p id="modalDesc">ä»‹ç´¹å…§å®¹...</p>
        </div>
    </div>

    <script>
        // æ¨™ç±¤åˆ‡æ›é‚è¼¯
        function openTab(evt, tabName) {
            const sections = document.getElementsByClassName("content-section");
            for (let i = 0; i < sections.length; i++) sections[i].classList.remove("active");
            const tabButtons = document.getElementsByClassName("tab-btn");
            for (let i = 0; i < tabButtons.length; i++) tabButtons[i].classList.remove("active");
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // æ™¯é»æ•¸æ“š
        const spotData = {
            'kokusai': { t: 'åœ‹éš›é€š', d: 'æ„·è•ç¬¬ä¸€ç«™!ä¼´æ‰‹ç¦®èˆ‡ç¾é£Ÿæ•£æ­¥é¦–é¸ã€‚' },
            'churaumi': { t: 'æ°´æ—é¤¨', d: 'å…¨æ—¥æœ¬æœ€å£¯è§€!çœ‹å·¨å¤§çš„é¯¨é¯Šåœ¨é»‘æ½®ä¹‹æµ·ã€‚' },
            'manzamo': { t: 'è±¡é¼»å²©', d: 'è¬åº§æ¯›æ¨™èªŒ,å®¶æ—å¤§åˆç…§çµ•ä½³åœ°é»ã€‚' },
            'american': { t: 'ç¾åœ‹æ‘', d: 'ç•°åœ‹æƒ…èª¿,è½æ—¥æµ·ç˜æ•£æ­¥æœ€æ£’ã€‚' },
            'zoo': { t: 'å…’ç«¥ç‹åœ‹', d: 'æ„·è•çš„å‹•ç‰©æ¢éšª,é©åˆå°æœ‹å‹è¿‘è·é›¢è§€å¯Ÿã€‚' },
            'aeon': { t: 'Aeon Mall', d: 'æœ€å¤§ç™¾è²¨,å¥½é€›ã€å¥½è²·ã€é‚„æœ‰å¤§æ°´æ—ç®±ã€‚' },
            'dmm': { t: 'DMMæ°´æ—é¤¨', d: 'é«˜ç§‘æŠ€å½±åƒè—è¡“,è¦–è¦ºæ•ˆæœæ¥µå¤¢å¹»ã€‚' },
            'outlet': { t: 'Outlet', d: 'æŠŠæ¡æœ€å¾Œè¡€æ‹¼æ©Ÿæœƒ!è¶…é100å®¶å“ç‰Œã€‚' },
            'teamlab': { t: 'teamLab', d: 'æ²ˆæµ¸å¼å…‰å½±è—è¡“,æ„·è•çš„äº’å‹•ç•«ç•«ã€‚' },
            'airport': { t: 'é‚£éœ¸æ©Ÿå ´', d: 'å¸¶è‘—æ»¿æ»¿å›æ†¶,æº–å‚™å›å®¶å›‰!' }
        };

        // å½ˆå‡ºè¦–çª—é‚è¼¯
        const pins = document.querySelectorAll('.pin');
        const modal = document.getElementById('infoModal');
        const mTitle = document.getElementById('modalTitle');
        const mDesc = document.getElementById('modalDesc');

        pins.forEach(pin => {
            pin.onclick = (e) => {
                e.stopPropagation();
                const id = pin.getAttribute('data-id');
                const spot = spotData[id];
                mTitle.innerText = spot.t;
                mDesc.innerText = spot.d;
                modal.style.display = 'flex';
            };
        });

        function closeModal() { modal.style.display = 'none'; }
        window.onclick = (e) => { if (e.target == modal) closeModal(); };

        // å€’æ•¸è¨ˆæ™‚é‚è¼¯ (2026/4/28)
        const targetDate = new Date("April 28, 2026 09:30:00").getTime();
        setInterval(function() {
            const now = new Date().getTime();
            const distance = targetDate - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            document.getElementById("timer").innerHTML = `${days}å¤© ${hours}æ™‚ ${minutes}åˆ† ${seconds}ç§’`;
        }, 1000);

        // åŒ¯ç‡æ›ç®—é‚è¼¯
        function convertCurrency() {
            const jpy = document.getElementById("jpyInput").value;
            document.getElementById("hkdResult").innerText = "â‰ˆ " + (jpy * 0.052).toFixed(2);
            document.getElementById("twdResult").innerText = "â‰ˆ " + (jpy * 0.22).toFixed(0);
        }

        // --- 1. Load Data on Startup ---
        // Attempt to load existing data from local storage, or default to empty arrays/objects
        let expenses = JSON.parse(localStorage.getItem('okinawa_expenses')) || [];
        let photoStatus = JSON.parse(localStorage.getItem('okinawa_photos')) || {};

        // Initialize the display once the page loads
        document.addEventListener('DOMContentLoaded', () => {
            updateExpenseDisplay();
            loadPhotoStatus();
        });

        // --- 2. Expense Tracker Logic ---
        function addExpense() {
            const desc = document.getElementById("expenseDesc").value;
            const amount = parseInt(document.getElementById("expenseAmount").value);

            if (!desc || isNaN(amount)) return alert("è«‹å¡«å¯«å®Œæ•´é …ç›®åç¨±èˆ‡é‡‘é¡");

            expenses.push({ desc, amount });

            // Save to browser memory
            saveExpenses();

            document.getElementById("expenseDesc").value = "";
            document.getElementById("expenseAmount").value = "";
            updateExpenseDisplay();
        }

        function deleteExpense(index) {
            if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤ç­†é–‹æ”¯å—ï¼Ÿ")) {
                expenses.splice(index, 1);
                saveExpenses();
                updateExpenseDisplay();
            }
        }

        function saveExpenses() {
            localStorage.setItem('okinawa_expenses', JSON.stringify(expenses));
        }

        function updateExpenseDisplay() {
            const total = expenses.reduce((sum, e) => sum + e.amount, 0);
            const count = expenses.length;
            // Assuming a 5-day trip for average calculation
            const avg = count > 0 ? Math.round(total / 5) : 0;

            document.getElementById("totalExpense").innerText = "Â¥" + total.toLocaleString();
            document.getElementById("expenseCount").innerText = count;
            document.getElementById("avgExpense").innerText = "Â¥" + avg.toLocaleString();

            const listHTML = expenses.map((e, i) =>
                `<div class="expense-item">
                    <span><strong>${e.desc}</strong></span>
                    <span>Â¥${e.amount.toLocaleString()} <button onclick="deleteExpense(${i})">åˆªé™¤</button></span>
                </div>`
            ).join("");
            document.getElementById("expenseList").innerHTML = listHTML || "<p style='text-align:center; color:#999;'>å°šæœªæ–°å¢ä»»ä½•é–‹æ”¯</p>";
        }


        // ç…§ç‰‡æ‰“å¡é‚è¼¯
        function togglePhoto(card) {
            card.classList.toggle("checked");
        }
        async function fetchOkinawaWeather() {
                const lat = 26.212; // Naha, Okinawa Latitude
                const lon = 127.679; // Naha, Okinawa Longitude
                const apiUrl = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weather_code,temperature_2m_max&timezone=Asia%2FTokyo`;

                try {
                    const response = await fetch(apiUrl);
                    const data = await response.json();
                    displayWeather(data.daily);
                    document.getElementById('weather-status').innerText = "æ•¸æ“šä¾†æº: Open-Meteo (å³æ™‚æ›´æ–°)";
                } catch (error) {
                    console.error("Weather fetch failed:", error);
                    document.getElementById('weather-status').innerText = "æš«æ™‚ç„¡æ³•å–å¾—å¤©æ°£è³‡è¨Šï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
                }
            }
        // Mapping WMO Weather Codes to Icons and Descriptions
        function getWeatherInfo(code) {
            const mapping = {
                0: { icon: 'â˜€ï¸', desc: 'æ™´æœ—' },
                1: { icon: 'ğŸŒ¤ï¸', desc: 'æ™´æ™‚å¤šé›²' },
                2: { icon: 'â›…', desc: 'å¤šé›²' },
                3: { icon: 'â˜ï¸', desc: 'é™°å¤©' },
                45: { icon: 'ğŸŒ«ï¸', desc: 'æœ‰éœ§' },
                51: { icon: 'ğŸŒ§ï¸', desc: 'æ¯›æ¯›é›¨' },
                61: { icon: 'ğŸŒ§ï¸', desc: 'å°é›¨' },
                63: { icon: 'ğŸŒ§ï¸', desc: 'é™£é›¨' },
                80: { icon: 'ğŸŒ¦ï¸', desc: 'é›·é™£é›¨' },
                95: { icon: 'â›ˆï¸', desc: 'é›·é›¨' }
            };
            return mapping[code] || { icon: 'â“', desc: 'æœªçŸ¥' };
        }

        function displayWeather(dailyData) {
            const grid = document.getElementById('dynamic-weather-grid');
            grid.innerHTML = ''; // Clear existing content

            // We only show the first 5 days from the API
            for (let i = 0; i < 5; i++) {
                const date = new Date(dailyData.time[i]);
                const dayStr = `${date.getMonth() + 1}/${date.getDate()} (${['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'][date.getDay()]})`;
                const temp = Math.round(dailyData.temperature_2m_max[i]);
                const info = getWeatherInfo(dailyData.weather_code[i]);

                const dayElement = `
                    <div class="weather-day">
                        <h4>${dayStr}</h4>
                        <div class="weather-icon">${info.icon}</div>
                        <div class="weather-temp">${temp}Â°C</div>
                        <div class="weather-desc">${info.desc}</div>
                    </div>
                `;
                grid.innerHTML += dayElement;
            }
        }

        // Call the function when the script loads
        fetchOkinawaWeather();

    </script>

</body>
</html>